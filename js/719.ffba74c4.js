"use strict";(self["webpackChunkhelium"]=self["webpackChunkhelium"]||[]).push([[719],{2127:(e,t,o)=>{o.d(t,{Z:()=>i});const s={methods:{showSuccess(e,t){t&&console.log(t),this.$q.notify({type:"positive",message:e,position:"top"})},showError(e,t){t&&console.log(t),this.$q.notify({type:"negative",message:e,position:"top"})}}},i=s},1719:(e,t,o)=>{o.r(t),o.d(t,{default:()=>X});var s=o(3673);const i={key:0,class:"full-width q-mb-md text-center"},l=(0,s._)("div",{class:"f-bold section-header"},"Todo",-1),a={key:0,class:"empty-line"},d=(0,s._)("div",{class:"f-bold section-header"},"Done",-1),n={key:1,class:"empty-line"};function m(e,t,o,m,c,r){const u=(0,s.up)("q-spinner"),p=(0,s.up)("ListItem"),h=(0,s.up)("q-separator"),w=(0,s.up)("q-btn"),f=(0,s.up)("q-page-sticky"),I=(0,s.up)("NewItemModal"),g=(0,s.up)("EditItemModal"),q=(0,s.up)("q-page");return e.loading?((0,s.wg)(),(0,s.iD)("div",i,[(0,s.Wm)(u,{size:"8em",color:"primary"})])):((0,s.wg)(),(0,s.j4)(q,{key:1,class:"index-layout"},{default:(0,s.w5)((()=>[l,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.incompleteItems,(t=>((0,s.wg)(),(0,s.j4)(p,{key:t.id,item:t,onUpdateStatus:e.updateItem,onEdit:e.showEditItemModal},null,8,["item","onUpdateStatus","onEdit"])))),128)),e.incompleteItems.length?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",a," No todo items. Yay! ")),(0,s.Wm)(h,{inset:"",class:"q-my-lg"}),d,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.completeItems,(t=>((0,s.wg)(),(0,s.j4)(p,{key:t.id,item:t,onUpdateStatus:e.updateItem,onEdit:e.showEditItemModal},null,8,["item","onUpdateStatus","onEdit"])))),128)),e.completeItems.length?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",n," No finished items. ")),(0,s.Wm)(f,{position:"bottom-right",offset:[18,18]},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{fab:"",icon:"add",color:"primary",onClick:e.showNewItemModal},null,8,["onClick"])])),_:1}),(0,s.Wm)(I,{ref:"newItem",onNew:e.addItem},null,8,["onNew"]),(0,s.Wm)(g,{ref:"editItem",onSave:e.replaceItem,onDelete:e.removeItem},null,8,["onSave","onDelete"])])),_:1}))}o(7098),o(7070);var c=o(4354),r=o(9535),u=o(6944),p=o(2127),h=(o(71),o(246),o(2323));const w={class:"row list-item"},f={class:"col q-gutter-y-xs"},I={class:"col f-bold item-title ellipsis"},g={class:"f-14 item-description"},q={class:"f-14 item-date"};function b(e,t,o,i,l,a){const d=(0,s.up)("q-checkbox"),n=(0,s.up)("q-btn");return(0,s.wg)(),(0,s.iD)("div",w,[(0,s.Wm)(d,{dense:"",class:"q-mr-md","model-value":e.item.done,"onUpdate:modelValue":e.updateStatus},null,8,["model-value","onUpdate:modelValue"]),(0,s._)("div",f,[(0,s._)("div",{class:"row items-center",onClick:t[0]||(t[0]=(...t)=>e.editItem&&e.editItem(...t))},[(0,s._)("div",I,(0,h.zw)(e.item.title),1),(0,s.Wm)(n,{icon:"edit",size:"sm","text-color":"grey",flat:"",dense:""})]),(0,s._)("div",g,(0,h.zw)(e.item.description),1),(0,s._)("div",q,"Due: "+(0,h.zw)(e.formattedDate),1)])])}var y=o(120),v=o.n(y);const Z=(0,s.aZ)({name:"ListItem",emits:["update-status","edit"],props:{item:Object},computed:{formattedDate(){return v()(this.item.date).format("M/D/YY")}},methods:{updateStatus(e){this.$emit("update-status",{id:this.item.id,value:e})},editItem(){this.$emit("edit",this.item.id)}}});var W=o(1420),V=o(3187),Q=o(7518),C=o.n(Q);Z.render=b;const k=Z;C()(Z,"components",{QCheckbox:W.Z,QBtn:V.Z});const _=(0,s._)("div",{class:"f-bold text-h6"},"New Todo",-1);function D(e,t,o,i,l,a){const d=(0,s.up)("q-space"),n=(0,s.up)("q-btn"),m=(0,s.up)("q-card-section"),c=(0,s.up)("q-input"),r=(0,s.up)("q-card-actions"),u=(0,s.up)("q-form"),p=(0,s.up)("q-card"),h=(0,s.up)("q-dialog"),w=(0,s.Q2)("close-popup");return(0,s.wg)(),(0,s.j4)(h,{modelValue:e.show,"onUpdate:modelValue":t[3]||(t[3]=t=>e.show=t)},{default:(0,s.w5)((()=>[(0,s.Wm)(p,{class:"modal-md"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{onSubmit:e.emitItem},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{class:"row items-center q-pb-none"},{default:(0,s.w5)((()=>[_,(0,s.Wm)(d),(0,s.wy)((0,s.Wm)(n,{icon:"close",flat:"",round:"",dense:""},null,512),[[w]])])),_:1}),(0,s.Wm)(m,{class:"q-gutter-y-md"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{modelValue:e.res.title,"onUpdate:modelValue":t[0]||(t[0]=t=>e.res.title=t),label:"Title",outlined:"",autofocus:"",maxlength:"50",counter:"",required:""},null,8,["modelValue"]),(0,s.Wm)(c,{modelValue:e.res.description,"onUpdate:modelValue":t[1]||(t[1]=t=>e.res.description=t),label:"Description",outlined:"",autogrow:"",counter:"",maxlength:"200",required:""},null,8,["modelValue"]),(0,s.Wm)(c,{modelValue:e.res.date,"onUpdate:modelValue":t[2]||(t[2]=t=>e.res.date=t),label:"Due Date","stack-label":"",outlined:"",type:"date",required:""},null,8,["modelValue"])])),_:1}),(0,s.Wm)(r,{class:"q-pa-md",align:"right"},{default:(0,s.w5)((()=>[(0,s.Wm)(n,{class:"q-pa-md",type:"submit",color:"primary",label:"Create","no-caps":""})])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"])}var M=o(515),S=o.n(M),E=o(1185);const U=(0,s.aZ)({name:"NewItemModal",emits:["new"],data(){return{show:!1,res:{title:"",description:"",date:""}}},methods:{showModal(){this.show=!0},closeModal(){Object.assign(this.$data,this.$options.data())},emitItem(){const e=S()(S()({id:(0,E.Z)()},this.res),{},{done:!1});this.$emit("new",e),this.closeModal()}}});var x=o(3379),$=o(151),j=o(5269),N=o(5589),P=o(2025),z=o(7815),T=o(9367),Y=o(677);U.render=D;const B=U;C()(U,"components",{QDialog:x.Z,QCard:$.Z,QForm:j.Z,QCardSection:N.Z,QSpace:P.Z,QBtn:V.Z,QInput:z.Z,QCardActions:T.Z}),C()(U,"directives",{ClosePopup:Y.Z});const J=(0,s._)("div",{class:"f-bold text-h6"},"Edit Todo",-1);function L(e,t,o,i,l,a){const d=(0,s.up)("q-space"),n=(0,s.up)("q-btn"),m=(0,s.up)("q-card-section"),c=(0,s.up)("q-input"),r=(0,s.up)("q-card-actions"),u=(0,s.up)("q-form"),p=(0,s.up)("q-card"),h=(0,s.up)("q-dialog"),w=(0,s.Q2)("close-popup");return(0,s.wg)(),(0,s.j4)(h,{modelValue:e.show,"onUpdate:modelValue":t[3]||(t[3]=t=>e.show=t)},{default:(0,s.w5)((()=>[(0,s.Wm)(p,{class:"modal-md"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{onSubmit:e.emitItem},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{class:"row items-center q-pb-none"},{default:(0,s.w5)((()=>[J,(0,s.Wm)(d),(0,s.wy)((0,s.Wm)(n,{icon:"close",flat:"",round:"",dense:""},null,512),[[w]])])),_:1}),(0,s.Wm)(m,{class:"q-gutter-y-md"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{modelValue:e.res.title,"onUpdate:modelValue":t[0]||(t[0]=t=>e.res.title=t),label:"Title",outlined:"",autofocus:"",maxlength:"50",counter:"",required:""},null,8,["modelValue"]),(0,s.Wm)(c,{modelValue:e.res.description,"onUpdate:modelValue":t[1]||(t[1]=t=>e.res.description=t),label:"Description",outlined:"",autogrow:"",counter:"",maxlength:"200",required:""},null,8,["modelValue"]),(0,s.Wm)(c,{modelValue:e.res.date,"onUpdate:modelValue":t[2]||(t[2]=t=>e.res.date=t),label:"Due Date","stack-label":"",outlined:"",type:"date",required:""},null,8,["modelValue"])])),_:1}),(0,s.Wm)(r,{class:"q-pa-md",align:"right"},{default:(0,s.w5)((()=>[(0,s.Wm)(n,{class:"q-pa-md",color:"negative",icon:"delete",onClick:e.deleteItem},null,8,["onClick"]),(0,s.Wm)(d),(0,s.Wm)(n,{class:"q-pa-md",type:"submit",color:"primary",label:"Save","no-caps":""})])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"])}const O=(0,s.aZ)({name:"EditItemModal",emits:["save","delete"],data(){return{show:!1,res:{id:"",title:"",description:"",date:"",done:!1}}},methods:{showModal(e){this.res=Object.assign(this.res,e),this.show=!0},closeModal(){Object.assign(this.$data,this.$options.data())},emitItem(){const e=S()({},this.res);this.$emit("save",e),this.closeModal()},deleteItem(){this.$emit("delete",this.res.id),this.closeModal()}}});O.render=L;const A=O;C()(O,"components",{QDialog:x.Z,QCard:$.Z,QForm:j.Z,QCardSection:N.Z,QSpace:P.Z,QBtn:V.Z,QInput:z.Z,QCardActions:T.Z}),C()(O,"directives",{ClosePopup:Y.Z});const F=(0,s.aZ)({name:"PageIndex",mixins:[p.Z],components:{ListItem:k,NewItemModal:B,EditItemModal:A},computed:{incompleteItems(){return this.items.filter((e=>!e.done)).sort(((e,t)=>e.date.localeCompare(t.date)))},completeItems(){return this.items.filter((e=>!!e.done)).sort(((e,t)=>e.date.localeCompare(t.date))).reverse()}},data(){return{loading:!1,db:null,collectionId:"",items:[]}},methods:{async fetchItems(){try{this.loading=!0;const e=this.db,t=(0,r.hJ)(e,this.collectionId),o=await(0,r.PL)(t);this.items=o.docs.map((e=>e.data()))}catch(e){this.showError("Could not fetch todo list",e)}finally{this.loading=!1}},async updateItem(e){try{const t=this.items.find((t=>t.id===e.id));t.done=e.value,await this.replaceItem(t)}catch(t){this.showError("Could not update item",t)}},async replaceItem(e){try{const t=this.db,o=this.items.findIndex((t=>t.id===e.id));this.items[o]=e,await(0,r.pl)((0,r.JU)(t,this.collectionId,e.id),e)}catch(t){this.showError("Could not edit item",t)}},async addItem(e){try{const t=this.db;this.items.push(e),await(0,r.pl)((0,r.JU)(t,this.collectionId,e.id),e)}catch(t){this.showError("Could not add new item",t)}},async removeItem(e){try{const t=this.db,o=this.items.findIndex((t=>t.id===e));this.items.splice(o,1),await(0,r.oe)((0,r.JU)(t,this.collectionId,e))}catch(t){this.showError("Could not delete item",t)}},showEditItemModal(e){const t=this.items.find((t=>t.id===e));this.$refs.editItem.showModal(t)},showNewItemModal(){this.$refs.newItem.showModal()},init(){const e=this,t=(0,u.v0)();(0,u.Aj)(t,(t=>{t&&(e.collectionId=t.uid,e.db=(0,r.ad)(c.Z),e.fetchItems())}))}},mounted(){this.init()}});var H=o(9754),K=o(4379),G=o(5869),R=o(1007);F.render=m;const X=F;C()(F,"components",{QSpinner:H.Z,QPage:K.Z,QSeparator:G.Z,QPageSticky:R.Z,QBtn:V.Z})}}]);